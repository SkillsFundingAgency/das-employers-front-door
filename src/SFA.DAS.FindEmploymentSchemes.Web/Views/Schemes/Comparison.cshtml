@model ComparisonModel

@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor

@await Html.PartialAsync(

    "_PreambleBannerPartial",

    new Tuple<string, string, IHtmlContent?>(Model.Preview.IsPreview ? "home-preview" : "home", string.Empty, null)

)

@{

    string completeUrl = Url.Action("Comparison", "Schemes", null, protocol: HttpContextAccessor.HttpContext.Request.Scheme);

}

<div class="govuk-width-container">

    <div class="govuk-grid-row govuk-!-padding-top-6">

        <div class="govuk-grid-column-two-thirds">

            <form method="post" autocomplete="off">

                <div class="govuk-form-group @(Model.NoneSelected ? "govuk-form-group--error" : "")">

                    <fieldset class="govuk-fieldset" aria-describedby="schemes-hint">

                        <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">

                            <h1 class="govuk-fieldset__heading">

                                Which schemes would you like to compare in more detail?

                            </h1>

                        </legend>

                        <div id="schemes-hint" class="govuk-hint">

                            Select all that apply.

                        </div>

                        @if (Model.NoneSelected) {

                            <p id="none-selected-error" class="govuk-error-message">

                                <span class="govuk-visually-hidden">Error:</span> No schemes were selected

                            </p>

                        }

                        <div class="govuk-checkboxes" data-module="govuk-checkboxes">

                        @foreach (var scheme in Model.Schemes)
                        {

                            <div class="govuk-checkboxes__item">

                                <input class="govuk-checkboxes__input" id="@scheme.HtmlId" name="schemes" type="checkbox" value="@scheme.HtmlId">
                                    
                                <label class="govuk-label govuk-checkboxes__label" for="@scheme.HtmlId">

                                    @scheme.Name

                                </label>

                            </div>

                        }

                        </div>

                    </fieldset>

                </div>
            
                <button class="das-button__primary" data-module="govuk-button">

                    Continue

                </button>

            </form>

        </div>

    </div>

</div>

@await Html.PartialAsync("_SharePagePartial", completeUrl)

<script asp-add-nonce>

    document.addEventListener("DOMContentLoaded", function() {

        compareSchemesSetup();

    });

</script>
